<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>System Architecture</title>
  <meta name="description" content="Hungai Amuhinda's Website | Software Engineer, Data Engineer, Engineering Manager, Site Reliability Engineer, DevOps Engineer, Cloud Engineer, and all things in between.
">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description" content="Hungai Amuhinda's Website | Software Engineer, Data Engineer, Engineering Manager, Site Reliability Engineer, DevOps Engineer, Cloud Engineer, and all things in between.
" />
  <meta property="og:url" content="https://www.hungaikev.in/systems/">
  <meta property="og:site_name" content="Hungai Amuhinda" />
  <meta property="og:title" content="System Architecture" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://www.hungaikev.in/assets/logo.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" />
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="System Architecture">
  <meta name="twitter:description" content="Hungai Amuhinda's Website | Software Engineer, Data Engineer, Engineering Manager, Site Reliability Engineer, DevOps Engineer, Cloud Engineer, and all things in between.
">
  <meta name="twitter:image" content="https://www.hungaikev.in/assets/logo.png">
  <meta name="twitter:url" content="https://www.hungaikev.in/systems/">
  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://www.hungaikev.in/systems/">
	<link rel="alternate" type="application/rss+xml" title="Hungai Amuhinda" href="https://www.hungaikev.in/feed.xml" />
	
	<!-- Tooltips -->
	<script type="text/javascript">
		window.tooltips = []
	</script>
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      
      <img src="/assets/logo.png" alt="Hungai Amuhinda">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
				
	
	<li class="nav-link"><a href="/about/">About</a>
	

	

	

	

	

	

	
	<li class="nav-link"><a href="/posts/">Posts</a>
	

	

	

	

	
	<li class="nav-link"><a href="/talks/">Talks</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="wrapper">
<div class="page">

  <header class="post-header">
    <h1 class="post-title">System Architecture</h1>
  </header>

  <span class="page-divider">
  <span class="one"></span>
  <span class="two"></span>
</span>


  <article class="post-content">
    <p>What is a <code class="language-plaintext highlighter-rouge">system</code>? A system fulfils a business need. A <code class="language-plaintext highlighter-rouge">system</code> is made up of:</p>

<ul>
  <li>Processes a.k.a services</li>
  <li>Databases e.g. Apache Cassandra</li>
  <li>Queueing systems e.g. Apache Kafka</li>
</ul>

<p>Users needn’t know about these components, only the <code class="language-plaintext highlighter-rouge">system</code>’s <code class="language-plaintext highlighter-rouge">ingress</code>. Users interact with your system via its <code class="language-plaintext highlighter-rouge">ingress</code>. 
Typical <code class="language-plaintext highlighter-rouge">ingress</code> mechanisms are:</p>

<ul>
  <li>HTTP and HTTP/2</li>
  <li>gRPC over HTTP/2</li>
  <li>A topic/queue such as Apache Kafka</li>
</ul>

<p>Users can be humans via a web browser or other <code class="language-plaintext highlighter-rouge">systems</code>.</p>

<p>What is system architecture? Simply put, architecture consists of everything that is hard to change after the fact.
Your system architecture impacts:</p>

<ul>
  <li>Reliability: does your system give the user the correct answer</li>
  <li>Availability: can your system respond to user requests</li>
  <li>Performance: how quickly does your system respond</li>
  <li>Capacity:  how many concurrent requests can your system handle</li>
</ul>

<p>Our recommended approach is to define <a href="https://sre.google/sre-book/service-level-objectives/">Service Level Objectives (SLOs)</a> for these aspects of your system even if you don’t
 a <a href="https://en.wikipedia.org/wiki/Service-level_agreement">Service Level Agreement (SLA)</a> with your user.</p>

<p>Some important parts of system architecture that constrain the above are:</p>

<ul>
  <li>System ingress</li>
  <li>Interprocess communication</li>
  <li>Persistence technologies e.g. databases &amp; queues</li>
  <li>Database access patterns</li>
</ul>

<h3 id="system-ingress">System ingress</h3>

<p>A user interacts with a <code class="language-plaintext highlighter-rouge">system</code> via its <code class="language-plaintext highlighter-rouge">ingress</code>. There are different tradeoffs for <code class="language-plaintext highlighter-rouge">ingress</code> vs communication within a system.
For <code class="language-plaintext highlighter-rouge">ingress</code> typical concerns are:</p>

<ul>
  <li>Forward and backward compatibility: users are out of your control, within a system all the components are in your control</li>
  <li>Authentication and authorisation</li>
  <li>TLS</li>
  <li>Global access: is the system exposed to the web, should their be edge locations around the world or a single region?</li>
</ul>

<p>For externally accessible systems the most common ingress technology is HTTP. There are many benefits to sticking with HTTP:</p>

<ul>
  <li>Global HTTP ingress support cloud providers with support for TLS termination</li>
  <li>Contend Delivery Networks and other caching technology</li>
  <li>Well defined authentication mechanisms and single sign on (SSO)</li>
</ul>

<p>For internal systems other ingress technologies can be used that are typical for inter process communication with in a system:</p>

<ul>
  <li>Queues e.g. Kafka: Asynchronous ingress allows the system to be fully shut down for maintenance without users knowing as long as performance SLOs aren’t breached</li>
  <li>HTTP/2 can take advantage of TCP multiplexing to reduce the overhead of connections</li>
  <li>gRPC uses, and has the advantages of, HTTP/2 as well as defining interfaces and serializion formats</li>
</ul>

<h3 id="inter-process-communication">Inter process communication</h3>

<p>The first major decision for interprocess communication is whether it is asynchronous or synchronous. Queues such as Kafka allow
asynchronous communication allowing components to be fully shutdown at the expense of two additional complexities:</p>

<ul>
  <li>Communication complexity for request/reply</li>
  <li>Infrastructure complexity of running queueing technology</li>
</ul>

<p>Synchronous communication means that the downstream component needs to be up at the time of request. It allows easier request/reply communication.
Synchronous communication is susceptible to cascading failures, where a downstream failure causes failures in all upstream components.</p>

<h3 id="database-access-patterns">Database access patterns</h3>

<p>Database access patterns come in three main categories:</p>

<ul>
  <li>Create, Update, Read, Delete (CRUD) where the database stores the current state of entities such as users, transactions or stock</li>
  <li>Arbitrary access. Less principled than CRUD, using any/every feature of a database e.g. arbitrary SQL.</li>
  <li>Event sourcing and Command Query Read Segregation (CQRS)</li>
</ul>

<p>CRUD often degrades into arbitrary database access. Event sourcing opens up possibilities such as rebuilding different views on the data
as all historical events are stored but introduces complexity such as:</p>

<ul>
  <li>Large build up of events, slowing the system down</li>
  <li>Supporting old schemas for events</li>
</ul>

<p>Each process in a system can use different database access patterns. Some organisations will give full autonomy to development teams to decide
on internal data access patterns whereas others will want to standardise.</p>

<h2 id="persistence-technology">Persistence technology</h2>

<p>Nothing affects a system more than the selected persistence technology. It puts upper bounds on:</p>

<ul>
  <li>Capacity: A traditional relational database may hit its limit in the 10s of TBs whereas a distributed database such as Apache Cassandra can go up to Petabytes</li>
  <li>Availability: Can it be deployed across DCs or is the max availability that of a single cloud region or data center?</li>
  <li>Performance</li>
</ul>

<p>In addition, it will dictate the costs of a system. Using <a href="https://cloud.google.com/spanner">Google Spanner</a> may provide your system with excellent latency and multi region support
but it comes at a huge cost.</p>


  </article>

</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">Hungai Amuhinda</h3>

    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <ul class="pages">
				
	
	<li class="nav-link"><a href="/about/">About</a>
	

	

	

	

	

	

	
	<li class="nav-link"><a href="/posts/">Posts</a>
	

	

	

	

	
	<li class="nav-link"><a href="/talks/">Talks</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:hungaikevin@gmail.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">hungaikevin@gmail.com</span>
          </a>
        </li>

        
          
          <li>
            <a href="https://twitter.com/Hungai" title="Follow me on Twitter">
              <i class="fa fa-twitter"></i>
              <span class="username">Hungai</span>
            </a>
          </li>
          
        
          
        
          
          <li>
            <a href="https://github.com/hungaikev" title="Fork me on GitHub">
              <i class="fa fa-github"></i>
              <span class="username">hungaikev</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://www.linkedin.com/in/hungai-amuhinda/" title="Connect with me on LinkedIn">
              <i class="fa fa-linkedin"></i>
              <span class="username">Hungai Amuhinda</span>
            </a>
          </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        

      </ul>
    </div>

    <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
      <p class="text">Hungai Amuhinda's Website | Software Engineer, Data Engineer, Engineering Manager, Site Reliability Engineer, DevOps Engineer, Cloud Engineer, and all things in between.
</p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/js/lightbox.min.js"></script>
<script src="//unpkg.com/popper.js@1"></script>
<script src="//unpkg.com/tippy.js@5"></script>

<script type="text/javascript">
$(document).ready(function() {
  // Default syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });

	// Enable tooltips via Tippy.js
	if (Array.isArray(window.tooltips)) {
		window.tooltips.forEach(function(tooltip) {
			var selector = tooltip[0];
			var config = tooltip[1];
			tippy(selector, config);
		})
	}
});

</script>




<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'G-F8PDQT4FG5', 'auto');
  ga('send', 'pageview', {
    'page': '/systems/',
    'title': 'System Architecture'
  });
</script>



  </body>

</html>
