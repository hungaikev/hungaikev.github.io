<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Implementing an Order Processing System: Part 1 - Setting Up the Foundation</title>
  <meta name="description" content="Set up the foundation for a sophisticated e-commerce platform, including project structure, basic API, database integration, and simple Temporal workflow.">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description" content="Set up the foundation for a sophisticated e-commerce platform, including project structure, basic API, database integration, and simple Temporal workflow." />
  <meta property="og:url" content="https://www.hungaikev.in/e-commerce-platform/part-1-setting-up-the-foundation/">
  <meta property="og:site_name" content="Hungai Amuhinda" />
  <meta property="og:title" content="Implementing an Order Processing System: Part 1 - Setting Up the Foundation" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://www.hungaikev.in/assets/logo.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" />
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Implementing an Order Processing System: Part 1 - Setting Up the Foundation">
  <meta name="twitter:description" content="Set up the foundation for a sophisticated e-commerce platform, including project structure, basic API, database integration, and simple Temporal workflow.">
  <meta name="twitter:image" content="https://www.hungaikev.in/assets/logo.png">
  <meta name="twitter:url" content="https://www.hungaikev.in/e-commerce-platform/part-1-setting-up-the-foundation/">
  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://www.hungaikev.in/e-commerce-platform/part-1-setting-up-the-foundation/">
	<link rel="alternate" type="application/rss+xml" title="Hungai Amuhinda" href="https://www.hungaikev.in/feed.xml" />
	
	<!-- Tooltips -->
	<script type="text/javascript">
		window.tooltips = []
	</script>
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      
      <img src="/assets/logo.png" alt="Hungai Amuhinda">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
				
	
	<li class="nav-link"><a href="/about/">About</a>
	

	

	

	

	

	

	
	<li class="nav-link"><a href="/posts/">Posts</a>
	

	

	

	

	
	<li class="nav-link"><a href="/talks/">Talks</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container " >
  <div class="scrim ">
    <header class="post-header">
      <h1 class="title">Implementing an Order Processing System: Part 1 - Setting Up the Foundation</h1>
      <p class="info">by <strong>Hungai Amuhinda</strong></p>
    </header>
  </div>
</div>

<div class="wrapper">

 <span class="page-divider">
  <span class="one"></span>
  <span class="two"></span>
</span>
 

<section class="post-meta">
  <div class="post-date">August 1, 2024</div>
  <div class="post-categories">
  in 
    
    <a href="/category/E-commerce Platform">E-commerce platform</a>, 
    
  
    
    <a href="/category/System Architecture">System architecture</a>
    
  
  </div>
</section>

<article class="post-content">
  <h2 id="1-introduction-and-goals">1. Introduction and Goals</h2>

<p>Welcome to the first part of our comprehensive blog series on implementing a sophisticated order processing system using Temporal for microservice orchestration. In this series, we’ll explore the intricacies of building a robust, scalable, and maintainable system that can handle complex, long-running workflows.</p>

<p>Our journey begins with setting up the foundation for our project. By the end of this post, you’ll have a fully functional CRUD REST API implemented in Golang, integrated with Temporal for workflow orchestration, and backed by a Postgres database. We’ll use modern tools and best practices to ensure our codebase is clean, efficient, and easy to maintain.</p>

<h3 id="goals-for-this-post">Goals for this post:</h3>

<ol>
  <li>Set up a well-structured project using Go modules</li>
  <li>Implement a basic CRUD API using Gin and oapi-codegen</li>
  <li>Set up a Postgres database and implement migrations</li>
  <li>Create a simple Temporal workflow with database interaction</li>
  <li>Implement dependency injection for better testability and maintainability</li>
  <li>Containerize our application using Docker</li>
  <li>Provide a complete local development environment using docker-compose</li>
</ol>

<p>Let’s dive in and start building our order processing system!</p>

<h2 id="2-theoretical-background-and-concepts">2. Theoretical Background and Concepts</h2>

<p>Before we start implementing, let’s briefly review the key technologies and concepts we’ll be using:</p>

<h3 id="golang">Golang</h3>

<p>Go is a statically typed, compiled language known for its simplicity, efficiency, and excellent support for concurrent programming. Its standard library and robust ecosystem make it an excellent choice for building microservices.</p>

<h3 id="temporal">Temporal</h3>

<p>Temporal is a microservice orchestration platform that simplifies the development of distributed applications. It allows us to write complex, long-running workflows as simple procedural code, handling failures and retries automatically.</p>

<h3 id="gin-web-framework">Gin Web Framework</h3>

<p>Gin is a high-performance HTTP web framework written in Go. It provides a martini-like API with much better performance and lower memory usage.</p>

<h3 id="openapi-and-oapi-codegen">OpenAPI and oapi-codegen</h3>

<p>OpenAPI (formerly known as Swagger) is a specification for machine-readable interface files for describing, producing, consuming, and visualizing RESTful web services. oapi-codegen is a tool that generates Go code from OpenAPI 3.0 specifications, allowing us to define our API contract first and generate server stubs and client code.</p>

<h3 id="sqlc">sqlc</h3>

<p>sqlc generates type-safe Go code from SQL. It allows us to write plain SQL queries and generate fully type-safe Go code to interact with our database, reducing the likelihood of runtime errors and improving maintainability.</p>

<h3 id="postgres">Postgres</h3>

<p>PostgreSQL is a powerful, open-source object-relational database system known for its reliability, feature robustness, and performance.</p>

<h3 id="docker-and-docker-compose">Docker and docker-compose</h3>

<p>Docker allows us to package our application and its dependencies into containers, ensuring consistency across different environments. docker-compose is a tool for defining and running multi-container Docker applications, which we’ll use to set up our local development environment.</p>

<p>Now that we’ve covered the basics, let’s start implementing our system.</p>

<h2 id="3-step-by-step-implementation-guide">3. Step-by-Step Implementation Guide</h2>

<h3 id="31-setting-up-the-project-structure">3.1 Setting Up the Project Structure</h3>

<p>First, let’s create our project directory and set up the basic structure:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>order-processing-system
<span class="nb">cd </span>order-processing-system

<span class="c"># Create directory structure</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> cmd/api <span class="se">\</span>
         internal/api <span class="se">\</span>
         internal/db <span class="se">\</span>
         internal/models <span class="se">\</span>
         internal/service <span class="se">\</span>
         internal/workflow <span class="se">\</span>
         migrations <span class="se">\</span>
         pkg/logger <span class="se">\</span>
         scripts

<span class="c"># Initialize Go module</span>
go mod init github.com/yourusername/order-processing-system

<span class="c"># Create main.go file</span>
<span class="nb">touch </span>cmd/api/main.go
</code></pre></div></div>

<p>This structure follows the standard Go project layout:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">cmd/api</code>: Contains the main application entry point</li>
  <li><code class="language-plaintext highlighter-rouge">internal</code>: Houses packages that are specific to this project and not meant to be imported by other projects</li>
  <li><code class="language-plaintext highlighter-rouge">migrations</code>: Stores database migration files</li>
  <li><code class="language-plaintext highlighter-rouge">pkg</code>: Contains packages that can be imported by other projects</li>
  <li><code class="language-plaintext highlighter-rouge">scripts</code>: Holds utility scripts for development and deployment</li>
</ul>

<h3 id="32-creating-the-makefile">3.2 Creating the Makefile</h3>

<p>Let’s create a Makefile to simplify common tasks:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">touch </span>Makefile
</code></pre></div></div>

<p>Add the following content to the Makefile:</p>

<div class="language-makefile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">.PHONY</span><span class="o">:</span> <span class="nf">generate build run test clean</span>

<span class="nl">generate</span><span class="o">:</span>
	<span class="p">@</span><span class="nb">echo</span> <span class="s2">"Generating code..."</span>
	go generate ./...

<span class="nl">build</span><span class="o">:</span>
	<span class="p">@</span><span class="nb">echo</span> <span class="s2">"Building..."</span>
	go build <span class="nt">-o</span> bin/api cmd/api/main.go

<span class="nl">run</span><span class="o">:</span>
	<span class="p">@</span><span class="nb">echo</span> <span class="s2">"Running..."</span>
	go run cmd/api/main.go

<span class="nl">test</span><span class="o">:</span>
	<span class="p">@</span><span class="nb">echo</span> <span class="s2">"Running tests..."</span>
	go <span class="nb">test</span> <span class="nt">-v</span> ./...

<span class="nl">clean</span><span class="o">:</span>
	<span class="p">@</span><span class="nb">echo</span> <span class="s2">"Cleaning..."</span>
	<span class="nb">rm</span> <span class="nt">-rf</span> bin

<span class="nv">.DEFAULT_GOAL</span> <span class="o">:=</span> build
</code></pre></div></div>

<p>This Makefile provides targets for generating code, building the application, running it, running tests, and cleaning up build artifacts.</p>

<h3 id="33-implementing-the-basic-crud-api">3.3 Implementing the Basic CRUD API</h3>

<h4 id="331-define-the-openapi-specification">3.3.1 Define the OpenAPI Specification</h4>

<p>Create a file named <code class="language-plaintext highlighter-rouge">api/openapi.yaml</code> and define our API specification:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">openapi</span><span class="pi">:</span> <span class="s">3.0.0</span>
<span class="na">info</span><span class="pi">:</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s">Order Processing API</span>
  <span class="na">version</span><span class="pi">:</span> <span class="s">1.0.0</span>
  <span class="na">description</span><span class="pi">:</span> <span class="s">API for managing orders in our processing system</span>

<span class="na">paths</span><span class="pi">:</span>
  <span class="na">/orders</span><span class="pi">:</span>
    <span class="na">get</span><span class="pi">:</span>
      <span class="na">summary</span><span class="pi">:</span> <span class="s">List all orders</span>
      <span class="na">responses</span><span class="pi">:</span>
        <span class="s1">'</span><span class="s">200'</span><span class="err">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">Successful response</span>
          <span class="na">content</span><span class="pi">:</span>
            <span class="na">application/json</span><span class="pi">:</span>    
              <span class="na">schema</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
                <span class="na">items</span><span class="pi">:</span>
                  <span class="na">$ref</span><span class="pi">:</span> <span class="s1">'</span><span class="s">#/components/schemas/Order'</span>
    <span class="na">post</span><span class="pi">:</span>
      <span class="na">summary</span><span class="pi">:</span> <span class="s">Create a new order</span>
      <span class="na">requestBody</span><span class="pi">:</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">content</span><span class="pi">:</span>
          <span class="na">application/json</span><span class="pi">:</span>
            <span class="na">schema</span><span class="pi">:</span>
              <span class="na">$ref</span><span class="pi">:</span> <span class="s1">'</span><span class="s">#/components/schemas/CreateOrderRequest'</span>
      <span class="na">responses</span><span class="pi">:</span>
        <span class="s1">'</span><span class="s">201'</span><span class="err">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">Created</span>
          <span class="na">content</span><span class="pi">:</span>
            <span class="na">application/json</span><span class="pi">:</span>
              <span class="na">schema</span><span class="pi">:</span>
                <span class="na">$ref</span><span class="pi">:</span> <span class="s1">'</span><span class="s">#/components/schemas/Order'</span>

  <span class="s">/orders/{id}</span><span class="err">:</span>
    <span class="na">get</span><span class="pi">:</span>
      <span class="na">summary</span><span class="pi">:</span> <span class="s">Get an order by ID</span>
      <span class="na">parameters</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">id</span>
          <span class="na">in</span><span class="pi">:</span> <span class="s">path</span>
          <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
          <span class="na">schema</span><span class="pi">:</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
      <span class="na">responses</span><span class="pi">:</span>
        <span class="s1">'</span><span class="s">200'</span><span class="err">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">Successful response</span>
          <span class="na">content</span><span class="pi">:</span>
            <span class="na">application/json</span><span class="pi">:</span>
              <span class="na">schema</span><span class="pi">:</span>
                <span class="na">$ref</span><span class="pi">:</span> <span class="s1">'</span><span class="s">#/components/schemas/Order'</span>
      <span class="err">  </span><span class="s1">'</span><span class="s">404'</span><span class="err">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">Order not found</span>
    <span class="na">put</span><span class="pi">:</span>
      <span class="na">summary</span><span class="pi">:</span> <span class="s">Update an order</span>
      <span class="na">parameters</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">id</span>
          <span class="na">in</span><span class="pi">:</span> <span class="s">path</span>
          <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
          <span class="na">schema</span><span class="pi">:</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
      <span class="na">requestBody</span><span class="pi">:</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">content</span><span class="pi">:</span>
          <span class="na">application/json</span><span class="pi">:</span>
            <span class="na">schema</span><span class="pi">:</span>
              <span class="na">$ref</span><span class="pi">:</span> <span class="s1">'</span><span class="s">#/components/schemas/UpdateOrderRequest'</span>
      <span class="na">responses</span><span class="pi">:</span>
        <span class="s1">'</span><span class="s">200'</span><span class="err">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">Successful response</span>
          <span class="na">content</span><span class="pi">:</span>
            <span class="na">application/json</span><span class="pi">:</span>
              <span class="na">schema</span><span class="pi">:</span>
                <span class="na">$ref</span><span class="pi">:</span> <span class="s1">'</span><span class="s">#/components/schemas/Order'</span>
      <span class="err">  </span><span class="s1">'</span><span class="s">404'</span><span class="err">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">Order not found</span>
    <span class="na">delete</span><span class="pi">:</span>
      <span class="na">summary</span><span class="pi">:</span> <span class="s">Delete an order</span>
      <span class="na">parameters</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">id</span>
          <span class="na">in</span><span class="pi">:</span> <span class="s">path</span>
          <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
          <span class="na">schema</span><span class="pi">:</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
      <span class="na">responses</span><span class="pi">:</span>
        <span class="s1">'</span><span class="s">204'</span><span class="err">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">Successful response</span>
        <span class="s1">'</span><span class="s">404'</span><span class="err">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">Order not found</span>

<span class="na">components</span><span class="pi">:</span>
  <span class="na">schemas</span><span class="pi">:</span>
    <span class="na">Order</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
      <span class="na">properties</span><span class="pi">:</span>
        <span class="na">id</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
        <span class="na">customer_id</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
        <span class="na">status</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">enum</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">pending</span><span class="pi">,</span> <span class="nv">processing</span><span class="pi">,</span> <span class="nv">completed</span><span class="pi">,</span> <span class="nv">cancelled</span><span class="pi">]</span>
        <span class="na">total_amount</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">number</span>
        <span class="na">created_at</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">format</span><span class="pi">:</span> <span class="s">date-time</span>
        <span class="na">updated_at</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">format</span><span class="pi">:</span> <span class="s">date-time</span>
    <span class="na">CreateOrderRequest</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
      <span class="na">required</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">customer_id</span>
        <span class="pi">-</span> <span class="s">total_amount</span>
      <span class="na">properties</span><span class="pi">:</span>
        <span class="na">customer_id</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
        <span class="na">total_amount</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">number</span>
    <span class="na">UpdateOrderRequest</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
      <span class="na">properties</span><span class="pi">:</span>
        <span class="na">status</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">enum</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">pending</span><span class="pi">,</span> <span class="nv">processing</span><span class="pi">,</span> <span class="nv">completed</span><span class="pi">,</span> <span class="nv">cancelled</span><span class="pi">]</span>
        <span class="na">total_amount</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">number</span>
</code></pre></div></div>

<p>This specification defines our basic CRUD operations for orders.</p>

<h4 id="332-generate-api-code">3.3.2 Generate API Code</h4>

<p>Install oapi-codegen:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>go <span class="nb">install </span>github.com/deepmap/oapi-codegen/cmd/oapi-codegen@latest
</code></pre></div></div>

<p>Generate the server code:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>oapi-codegen <span class="nt">-package</span> api <span class="nt">-generate</span> types,server,spec api/openapi.yaml <span class="o">&gt;</span> internal/api/api.gen.go
</code></pre></div></div>

<p>This command generates the Go code for our API, including types, server interfaces, and the OpenAPI specification.</p>

<h4 id="333-implement-the-api-handler">3.3.3 Implement the API Handler</h4>

<p>Create a new file <code class="language-plaintext highlighter-rouge">internal/api/handler.go</code>:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">api</span>

<span class="k">import</span> <span class="p">(</span>
	<span class="s">"net/http"</span>

	<span class="s">"github.com/gin-gonic/gin"</span>
<span class="p">)</span>

<span class="k">type</span> <span class="n">Handler</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="c">// We'll add dependencies here later</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">NewHandler</span><span class="p">()</span> <span class="o">*</span><span class="n">Handler</span> <span class="p">{</span>
	<span class="k">return</span> <span class="o">&amp;</span><span class="n">Handler</span><span class="p">{}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">h</span> <span class="o">*</span><span class="n">Handler</span><span class="p">)</span> <span class="n">RegisterRoutes</span><span class="p">(</span><span class="n">r</span> <span class="o">*</span><span class="n">gin</span><span class="o">.</span><span class="n">Engine</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">RegisterHandlers</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// Implement the ServerInterface methods</span>

<span class="k">func</span> <span class="p">(</span><span class="n">h</span> <span class="o">*</span><span class="n">Handler</span><span class="p">)</span> <span class="n">GetOrders</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">gin</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="p">{</span>
	<span class="c">// TODO: Implement</span>
	<span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">StatusOK</span><span class="p">,</span> <span class="p">[]</span><span class="n">Order</span><span class="p">{})</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">h</span> <span class="o">*</span><span class="n">Handler</span><span class="p">)</span> <span class="n">CreateOrder</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">gin</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">var</span> <span class="n">req</span> <span class="n">CreateOrderRequest</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">ShouldBindJSON</span><span class="p">(</span><span class="o">&amp;</span><span class="n">req</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">StatusBadRequest</span><span class="p">,</span> <span class="n">gin</span><span class="o">.</span><span class="n">H</span><span class="p">{</span><span class="s">"error"</span><span class="o">:</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">()})</span>
		<span class="k">return</span>
	<span class="p">}</span>

	<span class="c">// TODO: Implement order creation logic</span>
	<span class="n">order</span> <span class="o">:=</span> <span class="n">Order</span><span class="p">{</span>
		<span class="n">Id</span><span class="o">:</span>         <span class="m">1</span><span class="p">,</span>
		<span class="n">CustomerId</span><span class="o">:</span> <span class="n">req</span><span class="o">.</span><span class="n">CustomerId</span><span class="p">,</span>
		<span class="n">Status</span><span class="o">:</span>     <span class="s">"pending"</span><span class="p">,</span>
		<span class="n">TotalAmount</span><span class="o">:</span> <span class="n">req</span><span class="o">.</span><span class="n">TotalAmount</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">StatusCreated</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">h</span> <span class="o">*</span><span class="n">Handler</span><span class="p">)</span> <span class="n">GetOrder</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">gin</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">id</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="c">// TODO: Implement</span>
	<span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">StatusOK</span><span class="p">,</span> <span class="n">Order</span><span class="p">{</span><span class="n">Id</span><span class="o">:</span> <span class="n">id</span><span class="p">})</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">h</span> <span class="o">*</span><span class="n">Handler</span><span class="p">)</span> <span class="n">UpdateOrder</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">gin</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">id</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">var</span> <span class="n">req</span> <span class="n">UpdateOrderRequest</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">ShouldBindJSON</span><span class="p">(</span><span class="o">&amp;</span><span class="n">req</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">StatusBadRequest</span><span class="p">,</span> <span class="n">gin</span><span class="o">.</span><span class="n">H</span><span class="p">{</span><span class="s">"error"</span><span class="o">:</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">()})</span>
		<span class="k">return</span>
	<span class="p">}</span>

	<span class="c">// TODO: Implement order update logic</span>
	<span class="n">order</span> <span class="o">:=</span> <span class="n">Order</span><span class="p">{</span>
		<span class="n">Id</span><span class="o">:</span>     <span class="n">id</span><span class="p">,</span>
		<span class="n">Status</span><span class="o">:</span> <span class="o">*</span><span class="n">req</span><span class="o">.</span><span class="n">Status</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">StatusOK</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">h</span> <span class="o">*</span><span class="n">Handler</span><span class="p">)</span> <span class="n">DeleteOrder</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">gin</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">id</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="c">// TODO: Implement</span>
	<span class="n">c</span><span class="o">.</span><span class="n">Status</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">StatusNoContent</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This implementation provides a basic structure for our API handlers. We’ll flesh out the actual logic when we integrate with the database and Temporal workflows.</p>

<h3 id="34-setting-up-the-postgres-database">3.4 Setting Up the Postgres Database</h3>

<h4 id="341-create-a-docker-compose-file">3.4.1 Create a docker-compose file</h4>

<p>Create a <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file in the project root:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">postgres</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">postgres:13</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">POSTGRES_USER</span><span class="pi">:</span> <span class="s">orderuser</span>
      <span class="na">POSTGRES_PASSWORD</span><span class="pi">:</span> <span class="s">orderpass</span>
      <span class="na">POSTGRES_DB</span><span class="pi">:</span> <span class="s">orderdb</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">5432:5432"</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">postgres_data:/var/lib/postgresql/data</span>

<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">postgres_data</span><span class="pi">:</span>
</code></pre></div></div>

<p>This sets up a Postgres container for our local development environment.</p>

<h4 id="342-implement-database-migrations">3.4.2 Implement Database Migrations</h4>

<p>Install golang-migrate:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>go <span class="nb">install</span> <span class="nt">-tags</span> <span class="s1">'postgres'</span> github.com/golang-migrate/migrate/v4/cmd/migrate@latest
</code></pre></div></div>

<p>Create our first migration:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>migrate create <span class="nt">-ext</span> sql <span class="nt">-dir</span> migrations <span class="nt">-seq</span> create_orders_table
</code></pre></div></div>

<p>Edit the <code class="language-plaintext highlighter-rouge">migrations/000001_create_orders_table.up.sql</code> file:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">orders</span> <span class="p">(</span>
    <span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">customer_id</span> <span class="nb">INTEGER</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">status</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">total_amount</span> <span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">created_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
    <span class="n">updated_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span>
<span class="p">);</span>

<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">idx_orders_customer_id</span> <span class="k">ON</span> <span class="n">orders</span><span class="p">(</span><span class="n">customer_id</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">idx_orders_status</span> <span class="k">ON</span> <span class="n">orders</span><span class="p">(</span><span class="n">status</span><span class="p">);</span>
</code></pre></div></div>

<p>Edit the <code class="language-plaintext highlighter-rouge">migrations/000001_create_orders_table.down.sql</code> file:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">EXISTS</span> <span class="n">orders</span><span class="p">;</span>
</code></pre></div></div>

<h4 id="343-run-migrations">3.4.3 Run Migrations</h4>

<p>Add a new target to our Makefile:</p>

<div class="language-makefile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">migrate-up</span><span class="o">:</span>
	<span class="p">@</span><span class="nb">echo</span> <span class="s2">"Running migrations..."</span>
	migrate <span class="nt">-path</span> migrations <span class="nt">-database</span> <span class="s2">"postgresql://orderuser:orderpass@localhost:5432/orderdb?sslmode=disable"</span> up

<span class="nl">migrate-down</span><span class="o">:</span>
	<span class="p">@</span><span class="nb">echo</span> <span class="s2">"Reverting migrations..."</span>
	migrate <span class="nt">-path</span> migrations <span class="nt">-database</span> <span class="s2">"postgresql://orderuser:orderpass@localhost:5432/orderdb?sslmode=disable"</span> down
</code></pre></div></div>

<p>Now we can run migrations with:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make migrate-up
</code></pre></div></div>

<h3 id="35-implementing-database-operations-with-sqlc">3.5 Implementing Database Operations with sqlc</h3>

<h4 id="351-install-sqlc">3.5.1 Install sqlc</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>go <span class="nb">install </span>github.com/kyleconroy/sqlc/cmd/sqlc@latest
</code></pre></div></div>

<h4 id="352-configure-sqlc">3.5.2 Configure sqlc</h4>

<p>Create a <code class="language-plaintext highlighter-rouge">sqlc.yaml</code> file in the project root:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2"</span>
<span class="na">sql</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">engine</span><span class="pi">:</span> <span class="s2">"</span><span class="s">postgresql"</span>
    <span class="na">queries</span><span class="pi">:</span> <span class="s2">"</span><span class="s">internal/db/queries.sql"</span>
    <span class="na">schema</span><span class="pi">:</span> <span class="s2">"</span><span class="s">migrations"</span>
    <span class="na">gen</span><span class="pi">:</span>
      <span class="na">go</span><span class="pi">:</span>
        <span class="na">package</span><span class="pi">:</span> <span class="s2">"</span><span class="s">db"</span>
        <span class="na">out</span><span class="pi">:</span> <span class="s2">"</span><span class="s">internal/db"</span>
        <span class="na">emit_json_tags</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">emit_prepared_queries</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">emit_interface</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">emit_exact_table_names</span><span class="pi">:</span> <span class="kc">false</span>
</code></pre></div></div>

<h4 id="353-write-sql-queries">3.5.3 Write SQL Queries</h4>

<p>Create a file <code class="language-plaintext highlighter-rouge">internal/db/queries.sql</code>:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- name: GetOrder :one</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">orders</span>
<span class="k">WHERE</span> <span class="n">id</span> <span class="o">=</span> <span class="err">$</span><span class="mi">1</span> <span class="k">LIMIT</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">-- name: ListOrders :many</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">orders</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">id</span><span class="p">;</span>

<span class="c1">-- name: CreateOrder :one</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">orders</span> <span class="p">(</span>
  <span class="n">customer_id</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">total_amount</span>
<span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span>
  <span class="err">$</span><span class="mi">1</span><span class="p">,</span> <span class="err">$</span><span class="mi">2</span><span class="p">,</span> <span class="err">$</span><span class="mi">3</span>
<span class="p">)</span>
<span class="n">RETURNING</span> <span class="o">*</span><span class="p">;</span>

<span class="c1">-- name: UpdateOrder :one</span>
<span class="k">UPDATE</span> <span class="n">orders</span>
<span class="k">SET</span> <span class="n">status</span> <span class="o">=</span> <span class="err">$</span><span class="mi">2</span><span class="p">,</span> <span class="n">total_amount</span> <span class="o">=</span> <span class="err">$</span><span class="mi">3</span><span class="p">,</span> <span class="n">updated_at</span> <span class="o">=</span> <span class="k">CURRENT_TIMESTAMP</span>
<span class="k">WHERE</span> <span class="n">id</span> <span class="o">=</span> <span class="err">$</span><span class="mi">1</span>
<span class="n">RETURNING</span> <span class="o">*</span><span class="p">;</span>

<span class="c1">-- name: DeleteOrder :exec</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">orders</span>
<span class="k">WHERE</span> <span class="n">id</span> <span class="o">=</span> <span class="err">$</span><span class="mi">1</span><span class="p">;</span>
</code></pre></div></div>

<h4 id="354-generate-go-code">3.5.4 Generate Go Code</h4>

<p>Add a new target to our Makefile:</p>

<div class="language-makefile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">generate-sqlc</span><span class="o">:</span>
	<span class="p">@</span><span class="nb">echo</span> <span class="s2">"Generating sqlc code..."</span>
	sqlc generate
</code></pre></div></div>

<p>Run the code generation:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make generate-sqlc
</code></pre></div></div>

<p>This will generate Go code for interacting with our database in the <code class="language-plaintext highlighter-rouge">internal/db</code> directory.</p>

<h3 id="36-integrating-temporal">3.6 Integrating Temporal</h3>

<h4 id="361-set-up-temporal-server">3.6.1 Set Up Temporal Server</h4>

<p>Add Temporal to our <code class="language-plaintext highlighter-rouge">docker-compose.yml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">temporal</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">temporalio/auto-setup:1.13.0</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">7233:7233"</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">DB=postgresql</span>
      <span class="pi">-</span> <span class="s">DB_PORT=5432</span>
      <span class="pi">-</span> <span class="s">POSTGRES_USER=orderuser</span>
      <span class="pi">-</span> <span class="s">POSTGRES_PWD=orderpass</span>
      <span class="pi">-</span> <span class="s">POSTGRES_SEEDS=postgres</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">postgres</span>

  <span class="na">temporal-admin-tools</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">temporalio/admin-tools:1.13.0</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">temporal</span>
</code></pre></div></div>

<h4 id="362-implement-a-basic-workflow">3.6.2 Implement a Basic Workflow</h4>

<p>Create a file <code class="language-plaintext highlighter-rouge">internal/workflow/order_workflow.go</code>:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">workflow</span>

<span class="k">import</span> <span class="p">(</span>
	<span class="s">"time"</span>

	<span class="s">"go.temporal.io/sdk/workflow"</span>
	<span class="s">"github.com/yourusername/order-processing-system/internal/db"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">OrderWorkflow</span><span class="p">(</span><span class="n">ctx</span> <span class="n">workflow</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">order</span> <span class="n">db</span><span class="o">.</span><span class="n">Order</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
	<span class="n">logger</span> <span class="o">:=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">GetLogger</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
	<span class="n">logger</span><span class="o">.</span><span class="n">Info</span><span class="p">(</span><span class="s">"OrderWorkflow started"</span><span class="p">,</span> <span class="s">"OrderID"</span><span class="p">,</span> <span class="n">order</span><span class="o">.</span><span class="n">ID</span><span class="p">)</span>

	<span class="c">// Simulate order processing</span>
	<span class="n">err</span> <span class="o">:=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="m">5</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="n">err</span>
	<span class="p">}</span>

	<span class="c">// Update order status</span>
	<span class="n">err</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">ExecuteActivity</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">UpdateOrderStatus</span><span class="p">,</span> <span class="n">workflow</span><span class="o">.</span><span class="n">ActivityOptions</span><span class="p">{</span>
		<span class="n">StartToCloseTimeout</span><span class="o">:</span> <span class="n">time</span><span class="o">.</span><span class="n">Minute</span><span class="p">,</span>
	<span class="p">},</span> <span class="n">order</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s">"completed"</span><span class="p">)</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="n">err</span>
	<span class="p">}</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">Info</span><span class="p">(</span><span class="s">"OrderWorkflow completed"</span><span class="p">,</span> <span class="s">"OrderID"</span><span class="p">,</span> <span class="n">order</span><span class="o">.</span><span class="n">ID</span><span class="p">)</span>
	<span class="k">return</span> <span class="no">nil</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">UpdateOrderStatus</span><span class="p">(</span><span class="n">ctx</span> <span class="n">workflow</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">orderID</span> <span class="kt">int64</span><span class="p">,</span> <span class="n">status</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
	<span class="c">// TODO: Implement database update</span>
	<span class="k">return</span> <span class="no">nil</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This basic workflow simulates order processing by waiting for 5 seconds and then updating the order status to “completed”.</p>

<h4 id="363-integrate-workflow-with-api">3.6.3 Integrate Workflow with API</h4>

<p>Update the <code class="language-plaintext highlighter-rouge">internal/api/handler.go</code> file to include Temporal client and start the workflow:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">api</span>

<span class="k">import</span> <span class="p">(</span>
	<span class="s">"context"</span>
	<span class="s">"net/http"</span>

	<span class="s">"github.com/gin-gonic/gin"</span>
	<span class="s">"go.temporal.io/sdk/client"</span>
	<span class="s">"github.com/yourusername/order-processing-system/internal/db"</span>
	<span class="s">"github.com/yourusername/order-processing-system/internal/workflow"</span>
<span class="p">)</span>

<span class="k">type</span> <span class="n">Handler</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">queries</span>    <span class="o">*</span><span class="n">db</span><span class="o">.</span><span class="n">Queries</span>
	<span class="n">temporalClient</span> <span class="n">client</span><span class="o">.</span><span class="n">Client</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">NewHandler</span><span class="p">(</span><span class="n">queries</span> <span class="o">*</span><span class="n">db</span><span class="o">.</span><span class="n">Queries</span><span class="p">,</span> <span class="n">temporalClient</span> <span class="n">client</span><span class="o">.</span><span class="n">Client</span><span class="p">)</span> <span class="o">*</span><span class="n">Handler</span> <span class="p">{</span>
	<span class="k">return</span> <span class="o">&amp;</span><span class="n">Handler</span><span class="p">{</span>
		<span class="n">queries</span><span class="o">:</span>    <span class="n">queries</span><span class="p">,</span>
		<span class="n">temporalClient</span><span class="o">:</span> <span class="n">temporalClient</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="c">// ... (previous handler methods)</span>

<span class="k">func</span> <span class="p">(</span><span class="n">h</span> <span class="o">*</span><span class="n">Handler</span><span class="p">)</span> <span class="n">CreateOrder</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">gin</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">var</span> <span class="n">req</span> <span class="n">CreateOrderRequest</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">ShouldBindJSON</span><span class="p">(</span><span class="o">&amp;</span><span class="n">req</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">StatusBadRequest</span><span class="p">,</span> <span class="n">gin</span><span class="o">.</span><span class="n">H</span><span class="p">{</span><span class="s">"error"</span><span class="o">:</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">()})</span>
		<span class="k">return</span>
	<span class="p">}</span>

	<span class="n">order</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">h</span><span class="o">.</span><span class="n">queries</span><span class="o">.</span><span class="n">CreateOrder</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">CreateOrderParams</span><span class="p">{</span>
		<span class="n">CustomerID</span><span class="o">:</span>  <span class="n">req</span><span class="o">.</span><span class="n">CustomerId</span><span class="p">,</span>
		<span class="n">Status</span><span class="o">:</span>     <span class="s">"pending"</span><span class="p">,</span>
		<span class="n">TotalAmount</span><span class="o">:</span> <span class="n">req</span><span class="o">.</span><span class="n">TotalAmount</span><span class="p">,</span>
	<span class="p">})</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">StatusInternalServerError</span><span class="p">,</span> <span class="n">gin</span><span class="o">.</span><span class="n">H</span><span class="p">{</span><span class="s">"error"</span><span class="o">:</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">()})</span>
		<span class="k">return</span>
	<span class="p">}</span>

	<span class="c">// Start Temporal workflow</span>
	<span class="n">workflowOptions</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">StartWorkflowOptions</span><span class="p">{</span>
		<span class="n">ID</span><span class="o">:</span>        <span class="s">"order-"</span> <span class="o">+</span> <span class="n">order</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span>
		<span class="n">TaskQueue</span><span class="o">:</span> <span class="s">"order-processing"</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="n">_</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">temporalClient</span><span class="o">.</span><span class="n">ExecuteWorkflow</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">(),</span> <span class="n">workflowOptions</span><span class="p">,</span> <span class="n">workflow</span><span class="o">.</span><span class="n">OrderWorkflow</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">StatusInternalServerError</span><span class="p">,</span> <span class="n">gin</span><span class="o">.</span><span class="n">H</span><span class="p">{</span><span class="s">"error"</span><span class="o">:</span> <span class="s">"Failed to start workflow"</span><span class="p">})</span>
		<span class="k">return</span>
	<span class="p">}</span>

	<span class="n">c</span><span class="o">.</span><span class="n">JSON</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">StatusCreated</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// ... (implement other handler methods)</span>
</code></pre></div></div>

<h3 id="37-implementing-dependency-injection">3.7 Implementing Dependency Injection</h3>

<p>Create a new file <code class="language-plaintext highlighter-rouge">internal/service/service.go</code>:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">service</span>

<span class="k">import</span> <span class="p">(</span>
	<span class="s">"database/sql"</span>

	<span class="s">"github.com/yourusername/order-processing-system/internal/api"</span>
	<span class="s">"github.com/yourusername/order-processing-system/internal/db"</span>
	<span class="s">"go.temporal.io/sdk/client"</span>
<span class="p">)</span>

<span class="k">type</span> <span class="n">Service</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">DB</span>            <span class="o">*</span><span class="n">sql</span><span class="o">.</span><span class="n">DB</span>
	<span class="n">Queries</span>       <span class="o">*</span><span class="n">db</span><span class="o">.</span><span class="n">Queries</span>
	<span class="n">TemporalClient</span> <span class="n">client</span><span class="o">.</span><span class="n">Client</span>
	<span class="n">Handler</span>       <span class="o">*</span><span class="n">api</span><span class="o">.</span><span class="n">Handler</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">NewService</span><span class="p">()</span> <span class="p">(</span><span class="o">*</span><span class="n">Service</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="c">// Initialize database connection</span>
	<span class="n">db</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">sql</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="s">"postgres"</span><span class="p">,</span> <span class="s">"postgresql://orderuser:orderpass@localhost:5432/orderdb?sslmode=disable"</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="no">nil</span><span class="p">,</span> <span class="n">err</span>
	<span class="p">}</span>

	<span class="c">// Initialize Temporal client</span>
	<span class="n">temporalClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">NewClient</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">Options</span><span class="p">{</span>
		<span class="n">HostPort</span><span class="o">:</span> <span class="s">"localhost:7233"</span><span class="p">,</span>
	<span class="p">})</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="no">nil</span><span class="p">,</span> <span class="n">err</span>
	<span class="p">}</span>

	<span class="c">// Initialize queries</span>
	<span class="n">queries</span> <span class="o">:=</span> <span class="n">db</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>

	<span class="c">// Initialize handler</span>
	<span class="n">handler</span> <span class="o">:=</span> <span class="n">api</span><span class="o">.</span><span class="n">NewHandler</span><span class="p">(</span><span class="n">queries</span><span class="p">,</span> <span class="n">temporalClient</span><span class="p">)</span>

	<span class="k">return</span> <span class="o">&amp;</span><span class="n">Service</span><span class="p">{</span>
		<span class="n">DB</span><span class="o">:</span>            <span class="n">db</span><span class="p">,</span>
		<span class="n">Queries</span><span class="o">:</span>       <span class="n">queries</span><span class="p">,</span>
		<span class="n">TemporalClient</span><span class="o">:</span> <span class="n">temporalClient</span><span class="p">,</span>
		<span class="n">Handler</span><span class="o">:</span>       <span class="n">handler</span><span class="p">,</span>
	<span class="p">},</span> <span class="no">nil</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">s</span> <span class="o">*</span><span class="n">Service</span><span class="p">)</span> <span class="n">Close</span><span class="p">()</span> <span class="p">{</span>
	<span class="n">s</span><span class="o">.</span><span class="n">DB</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
	<span class="n">s</span><span class="o">.</span><span class="n">TemporalClient</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="38-update-main-function">3.8 Update Main Function</h3>

<p>Update the <code class="language-plaintext highlighter-rouge">cmd/api/main.go</code> file:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
	<span class="s">"log"</span>

	<span class="s">"github.com/gin-gonic/gin"</span>
	<span class="n">_</span> <span class="s">"github.com/lib/pq"</span>
	<span class="s">"github.com/yourusername/order-processing-system/internal/service"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="n">svc</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">service</span><span class="o">.</span><span class="n">NewService</span><span class="p">()</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="n">log</span><span class="o">.</span><span class="n">Fatalf</span><span class="p">(</span><span class="s">"Failed to initialize service: %v"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">defer</span> <span class="n">svc</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

	<span class="n">r</span> <span class="o">:=</span> <span class="n">gin</span><span class="o">.</span><span class="n">Default</span><span class="p">()</span>
	<span class="n">svc</span><span class="o">.</span><span class="n">Handler</span><span class="o">.</span><span class="n">RegisterRoutes</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

	<span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s">":8080"</span><span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="n">log</span><span class="o">.</span><span class="n">Fatalf</span><span class="p">(</span><span class="s">"Failed to run server: %v"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="39-dockerize-the-application">3.9 Dockerize the Application</h3>

<p>Create a <code class="language-plaintext highlighter-rouge">Dockerfile</code> in the project root:</p>

<div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Build stage</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">golang:1.17-alpine</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">build</span>

<span class="k">WORKDIR</span><span class="s"> /app</span>

<span class="k">COPY</span><span class="s"> go.mod go.sum ./</span>
<span class="k">RUN </span>go mod download

<span class="k">COPY</span><span class="s"> . .</span>
<span class="k">RUN </span><span class="nv">CGO_ENABLED</span><span class="o">=</span>0 <span class="nv">GOOS</span><span class="o">=</span>linux go build <span class="nt">-o</span> /order-processing-system ./cmd/api

<span class="c"># Run stage</span>
<span class="k">FROM</span><span class="s"> alpine:latest</span>

<span class="k">WORKDIR</span><span class="s"> /</span>

<span class="k">COPY</span><span class="s"> --from=build /order-processing-system /order-processing-system</span>

<span class="k">EXPOSE</span><span class="s"> 8080</span>

<span class="k">ENTRYPOINT</span><span class="s"> ["/order-processing-system"]</span>
</code></pre></div></div>

<p>Update the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file to include our application:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">postgres</span><span class="pi">:</span>
    <span class="c1"># ... (previous postgres configuration)</span>

  <span class="na">temporal</span><span class="pi">:</span>
    <span class="c1"># ... (previous temporal configuration)</span>

  <span class="na">temporal-admin-tools</span><span class="pi">:</span>
    <span class="c1"># ... (previous temporal-admin-tools configuration)</span>

  <span class="na">app</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">.</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">8080:8080"</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">postgres</span>
      <span class="pi">-</span> <span class="s">temporal</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">DB_HOST=postgres</span>
      <span class="pi">-</span> <span class="s">DB_USER=orderuser</span>
      <span class="pi">-</span> <span class="s">DB_PASSWORD=orderpass</span>
      <span class="pi">-</span> <span class="s">DB_NAME=orderdb</span>
      <span class="pi">-</span> <span class="s">TEMPORAL_HOST=temporal:7233</span>
</code></pre></div></div>

<h2 id="4-code-examples-with-detailed-comments">4. Code Examples with Detailed Comments</h2>

<p>Throughout the implementation guide, we’ve provided code snippets with explanations. Here’s a more detailed look at a key part of our system: the Order Workflow.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">workflow</span>

<span class="k">import</span> <span class="p">(</span>
	<span class="s">"time"</span>

	<span class="s">"go.temporal.io/sdk/workflow"</span>
	<span class="s">"github.com/yourusername/order-processing-system/internal/db"</span>
<span class="p">)</span>

<span class="c">// OrderWorkflow defines the workflow for processing an order</span>
<span class="k">func</span> <span class="n">OrderWorkflow</span><span class="p">(</span><span class="n">ctx</span> <span class="n">workflow</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">order</span> <span class="n">db</span><span class="o">.</span><span class="n">Order</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
	<span class="n">logger</span> <span class="o">:=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">GetLogger</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
	<span class="n">logger</span><span class="o">.</span><span class="n">Info</span><span class="p">(</span><span class="s">"OrderWorkflow started"</span><span class="p">,</span> <span class="s">"OrderID"</span><span class="p">,</span> <span class="n">order</span><span class="o">.</span><span class="n">ID</span><span class="p">)</span>

	<span class="c">// Simulate order processing</span>
	<span class="c">// In a real-world scenario, this could involve multiple activities such as</span>
	<span class="c">// inventory check, payment processing, shipping arrangement, etc.</span>
	<span class="n">err</span> <span class="o">:=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="m">5</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="n">err</span>
	<span class="p">}</span>

	<span class="c">// Update order status</span>
	<span class="c">// We use ExecuteActivity to run the status update as an activity</span>
	<span class="c">// This allows for automatic retries and error handling</span>
	<span class="n">err</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">ExecuteActivity</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">UpdateOrderStatus</span><span class="p">,</span> <span class="n">workflow</span><span class="o">.</span><span class="n">ActivityOptions</span><span class="p">{</span>
		<span class="n">StartToCloseTimeout</span><span class="o">:</span> <span class="n">time</span><span class="o">.</span><span class="n">Minute</span><span class="p">,</span>
	<span class="p">},</span> <span class="n">order</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s">"completed"</span><span class="p">)</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="n">err</span>
	<span class="p">}</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">Info</span><span class="p">(</span><span class="s">"OrderWorkflow completed"</span><span class="p">,</span> <span class="s">"OrderID"</span><span class="p">,</span> <span class="n">order</span><span class="o">.</span><span class="n">ID</span><span class="p">)</span>
	<span class="k">return</span> <span class="no">nil</span>
<span class="p">}</span>

<span class="c">// UpdateOrderStatus is an activity that updates the status of an order</span>
<span class="k">func</span> <span class="n">UpdateOrderStatus</span><span class="p">(</span><span class="n">ctx</span> <span class="n">workflow</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">orderID</span> <span class="kt">int64</span><span class="p">,</span> <span class="n">status</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
	<span class="c">// TODO: Implement database update</span>
	<span class="c">// In a real implementation, this would use the db.Queries to update the order status</span>
	<span class="k">return</span> <span class="no">nil</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This workflow demonstrates several key concepts:</p>

<ol>
  <li>Use of Temporal’s <code class="language-plaintext highlighter-rouge">workflow.Context</code> for managing the workflow lifecycle.</li>
  <li>Logging within workflows using <code class="language-plaintext highlighter-rouge">workflow.GetLogger</code>.</li>
  <li>Simulating long-running processes with <code class="language-plaintext highlighter-rouge">workflow.Sleep</code>.</li>
  <li>Executing activities within a workflow using <code class="language-plaintext highlighter-rouge">workflow.ExecuteActivity</code>.</li>
  <li>Handling errors and returning them to be managed by Temporal.</li>
</ol>

<h2 id="5-testing-and-validation">5. Testing and Validation</h2>

<p>For this initial setup, we’ll focus on manual testing to ensure our system is working as expected. In future posts, we’ll dive into unit testing, integration testing, and end-to-end testing strategies.</p>

<p>To manually test our system:</p>

<ol>
  <li>Start the services:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose up
</code></pre></div>    </div>
  </li>
  <li>
    <p>Use a tool like cURL or Postman to send requests to our API:</p>

    <p>Create an order:</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -X POST http://localhost:8080/orders -H "Content-Type: application/json" -d '{"customer_id": 1, "total_amount": 100.50}'
</code></pre></div>    </div>

    <p>List orders:</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost:8080/orders
</code></pre></div>    </div>

    <p>Get a specific order:</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost:8080/orders/1
</code></pre></div>    </div>

    <p>Update an order:</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -X PUT http://localhost:8080/orders/1 -H "Content-Type: application/json" -d '{"status": "processing", "total_amount": 150.75}'
</code></pre></div>    </div>

    <p>Delete an order:</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -X DELETE http://localhost:8080/orders/1
</code></pre></div>    </div>
  </li>
  <li>Check the logs to ensure the Temporal workflow is being triggered and completed successfully.</li>
</ol>

<h2 id="6-challenges-and-considerations">6. Challenges and Considerations</h2>

<p>While setting up this initial version of our order processing system, we encountered several challenges and considerations:</p>

<ol>
  <li>
    <p><strong>Database Schema Design</strong>: Designing a flexible yet efficient schema for orders is crucial. We kept it simple for now, but in a real-world scenario, we might need to consider additional tables for order items, customer information, etc.</p>
  </li>
  <li>
    <p><strong>Error Handling</strong>: Our current implementation has basic error handling. In a production system, we’d need more robust error handling and logging, especially for the Temporal workflows.</p>
  </li>
  <li>
    <p><strong>Configuration Management</strong>: We hardcoded configuration values for simplicity. In a real-world scenario, we’d use environment variables or a configuration management system.</p>
  </li>
  <li>
    <p><strong>Security</strong>: Our current setup doesn’t include any authentication or authorization. In a production system, we’d need to implement proper security measures.</p>
  </li>
  <li>
    <p><strong>Scalability</strong>: While Temporal helps with workflow scalability, we’d need to consider database scalability and API performance for a high-traffic system.</p>
  </li>
  <li>
    <p><strong>Monitoring and Observability</strong>: We haven’t implemented any monitoring or observability tools yet. In a production system, these would be crucial for maintaining and troubleshooting the application.</p>
  </li>
</ol>

<h2 id="7-next-steps-and-preview-of-part-2">7. Next Steps and Preview of Part 2</h2>

<p>In this first part of our series, we’ve set up the foundation for our order processing system. We have a basic CRUD API, database integration, and a simple Temporal workflow.</p>

<p>In the next part, we’ll dive deeper into Temporal workflows and activities. We’ll explore:</p>

<ol>
  <li>Implementing more complex order processing logic</li>
  <li>Handling long-running workflows with Temporal</li>
  <li>Implementing retry logic and error handling in workflows</li>
  <li>Versioning workflows for safe updates</li>
  <li>Implementing saga patterns for distributed transactions</li>
  <li>Monitoring and observability for Temporal workflows</li>
</ol>

<p>We’ll also start to flesh out our API with more realistic order processing logic and explore patterns for maintaining clean, maintainable code as our system grows in complexity.</p>

<p>Stay tuned for Part 2, where we’ll take our order processing system to the next level!</p>

<hr />

<h1>Need Help?</h1>
<p>Are you facing challenging problems, or need an external perspective on a new idea or project? I can help! Whether you're looking to build a technology proof of concept before making a larger investment, or you need guidance on difficult issues, I'm here to assist.</p>

<h2>Services Offered:</h2>
<ul>
    <li><strong>Problem-Solving:</strong> Tackling complex issues with innovative solutions.</li>
    <li><strong>Consultation:</strong> Providing expert advice and fresh viewpoints on your projects.</li>
    <li><strong>Proof of Concept:</strong> Developing preliminary models to test and validate your ideas.</li>
</ul>

<p>If you're interested in working with me, please reach out via email at <a href="mailto:hungaikevin@gmail.com">hungaikevin@gmail.com</a>.</p>

<p>Let's turn your challenges into opportunities!</p>


</article>



<section class="tags">
  <strong>Tags:</strong> <a href="/tag/Golang">Golang</a>,&nbsp;<a href="/tag/Gin">Gin</a>,&nbsp;<a href="/tag/Temporal">Temporal</a>,&nbsp;<a href="/tag/PostgreSQL">PostgreSQL</a>,&nbsp;<a href="/tag/Docker">Docker</a>
</section>



<section class="rss">
  <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
</section>

<section class="share">
  <span>Share: </span>
  
    
    
      <a href="//twitter.com/share?text=Implementing+an+Order+Processing+System%3A+Part+1+-+Setting+Up+the+Foundation&url=https%3A%2F%2Fwww.hungaikev.in%2Fe-commerce-platform%2Fpart-1-setting-up-the-foundation%2F&via=Hungai"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
        <i class="fa fa-twitter-square fa-lg"></i>
      </a>
    
    
    
    
    
    
    
  
    
    
    
      <a href="//www.facebook.com/sharer.php?t=Implementing+an+Order+Processing+System%3A+Part+1+-+Setting+Up+the+Foundation&u=https%3A%2F%2Fwww.hungaikev.in%2Fe-commerce-platform%2Fpart-1-setting-up-the-foundation%2F"
        onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
        <i class="fa fa-facebook-square fa-lg"></i>
      </a>
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
      <a href="//www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fwww.hungaikev.in%2Fe-commerce-platform%2Fpart-1-setting-up-the-foundation%2F"
        onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;">
        <i class="fa fa-linkedin-square fa-lg"></i>
      </a>
    
    
    
    
  
    
    
    
    
      <a href="//plus.google.com/share?title=Implementing+an+Order+Processing+System%3A+Part+1+-+Setting+Up+the+Foundation&url=https%3A%2F%2Fwww.hungaikev.in%2Fe-commerce-platform%2Fpart-1-setting-up-the-foundation%2F"
        onclick="window.open(this.href, 'google-plus-share', 'width=550,height=255');return false;">
        <i class="fa fa-google-plus-square fa-lg"></i>
      </a>
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
      <a href="//www.pinterest.com/pin/create/button/?description=Implementing+an+Order+Processing+System%3A+Part+1+-+Setting+Up+the+Foundation&url=https%3A%2F%2Fwww.hungaikev.in%2Fe-commerce-platform%2Fpart-1-setting-up-the-foundation%2F&media=https://www.hungaikev.in/assets/header_image.jpg"
        onclick="window.open(this.href, 'pinterest-share', 'width=550,height=255');return false;">
        <i class="fa fa-pinterest-square fa-lg"></i>
      </a>
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
      <a href="//www.reddit.com/submit" onclick="window.location = '//www.reddit.com/submit?url=' + encodeURIComponent('https://www.hungaikev.in/e-commerce-platform/part-1-setting-up-the-foundation/') + '&title=Implementing an Order Processing System: Part 1 - Setting Up the Foundation'; return false">
        <i class="fa fa-reddit-square fa-lg"></i>
      </a>
    
    
  
    
    
    
    
    
    
    
    
  
</section>




</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">Hungai Amuhinda</h3>

    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <ul class="pages">
				
	
	<li class="nav-link"><a href="/about/">About</a>
	

	

	

	

	

	

	
	<li class="nav-link"><a href="/posts/">Posts</a>
	

	

	

	

	
	<li class="nav-link"><a href="/talks/">Talks</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:hungaikevin@gmail.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">hungaikevin@gmail.com</span>
          </a>
        </li>

        
          
          <li>
            <a href="https://twitter.com/Hungai" title="Follow me on Twitter">
              <i class="fa fa-twitter"></i>
              <span class="username">Hungai</span>
            </a>
          </li>
          
        
          
        
          
          <li>
            <a href="https://github.com/hungaikev" title="Fork me on GitHub">
              <i class="fa fa-github"></i>
              <span class="username">hungaikev</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://www.linkedin.com/in/hungai-amuhinda/" title="Connect with me on LinkedIn">
              <i class="fa fa-linkedin"></i>
              <span class="username">Hungai Amuhinda</span>
            </a>
          </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        

      </ul>
    </div>

    <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
      <p class="text">Hungai Amuhinda's Website | Software Engineer, Data Engineer, Engineering Manager, Site Reliability Engineer, DevOps Engineer, Cloud Engineer, and all things in between.
</p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/js/lightbox.min.js"></script>
<script src="//unpkg.com/popper.js@1"></script>
<script src="//unpkg.com/tippy.js@5"></script>

<script type="text/javascript">
$(document).ready(function() {
  // Default syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });

	// Enable tooltips via Tippy.js
	if (Array.isArray(window.tooltips)) {
		window.tooltips.forEach(function(tooltip) {
			var selector = tooltip[0];
			var config = tooltip[1];
			tippy(selector, config);
		})
	}
});

</script>




<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'G-F8PDQT4FG5', 'auto');
  ga('send', 'pageview', {
    'page': '/e-commerce-platform/part-1-setting-up-the-foundation/',
    'title': 'Implementing an Order Processing System: Part 1 - Setting Up the Foundation'
  });
</script>



  </body>

</html>
